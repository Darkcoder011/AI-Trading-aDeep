[build]
builder = "DOCKERFILE"
dockerfilePath = "Dockerfile"
buildCommand = ""
watchPatterns = ["backend/**/*", "frontend/**/*"]

[deploy]
startCommand = "cd /app/backend && uvicorn main:app --host 0.0.0.0 --port $PORT --workers 1 --timeout-keep-alive 75 --log-level info"
restartPolicyType = "on_failure"
restartPolicyMaxRetries = 10
healthcheckPath = "/api/health"
healthcheckTimeout = 300
healthcheckInterval = "30s"
healthcheckMaxRetries = 10
startupDelay = "60s"
numReplicas = 1

[service]
name = "llm-market-analysis"
internal_port = 8000
root_directory = "/app"

[env]
PYTHON_VERSION = "3.9"
NODE_VERSION = "16"
PYTHONUNBUFFERED = "1"
PYTHONPATH = "/app"
DEBUG = "False"
TF_ENABLE_ONEDNN_OPTS = "0"
PORT = "8000"
MAX_WORKERS = "1"
TIMEOUT = "75"
LOG_LEVEL = "info"
